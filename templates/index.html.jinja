{% extends "layout.html.jinja" %}

{% block main %}
    <h1>Dual Momentum</h1>

    <form method="post" action="/">
        <label for="start_date">Start Date</label>
        <input id="start_date" name="start_date" type="month" value="2000-01" required>

        <label for="end_date">End Date</label>
        <input id="end_date" name="end_date" type="month" value="2025-06" required>

{#        <label for="include_ytd">Include YTD</label>#}
{#        <input id="include_ytd" name="include_ytd" type="checkbox">#}

        <label for="initial_investment">Initial Amount</label>
        <input id="initial_investment" name="initial_investment" type="number" step=".01" value="10000" required>

        <label for="tickers">Tickers (comma separated)</label>
        <input id="tickers" name="tickers" type="text" required>

{#        <label for="single_absolute_momentum">Single Absolute Momentum</label>#}
{#        <input id="single_absolute_momentum" name="single_absolute_momentum" type="checkbox">#}

        <label for="safe_asset">Out of Market Asset</label>
        <input id="safe_asset" name="safe_asset" type="text">

        <label for="rebalance_period" title="How often to consider trades">Rebalance Period (months)</label>
        <input id="rebalance_period" name="rebalance_period" type="number" min="1" max="12" value="1" required>

        <label for="lookback_period" title="How many months to consider for momentum calculations">Lookback Period (months)</label>
        <input id="lookback_period" name="lookback_period" type="number" min="1" max="24" value="12" required>

        <label for="switching_cost" title="How much value the portfolio loses whenever a trade happens">Switching Cost (%)</label>
        <input id="switching_cost" name="switching_cost" type="number" min="0" value="0" required>

        <button>Submit</button>
    </form>

    <section>
        <h2>Past jobs</h2>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Start</th>
                    <th>End</th>
{#                    <th>YTD?</th>#}
                    <th>Initial Amt</th>
                    <th>Tickers</th>
{#                    <th><abbr title="Single Absolute Momentum">SAM</abbr></th>#}
                    <th>Rebalance Period</th>
                    <th>Lookback Period</th>
                    <th>Switching Cost</th>
                    <th>Returns</th>
                    <th>Trades</th>
                </tr>
            </thead>
            <tbody>
                {% for job in jobs %}
                    <tr>
                        <td>{{ job.id }}</td>
                        <td>{{ job.start_year }}-{{ job.start_month }}</td>
                        <td>{{ job.end_year }}-{{ job.end_month }}</td>
{#                        <td>YTD?</td>#}
                        <td>${{ job.initial_investment }}</td>
                        <td>{{ job.tickers }}</td>
{#                        <td><abbr title="Single Absolute Momentum">SAM</abbr></td>#}
                        <td>{{ job.rebalance_period }}</td>
                        <td>{{ job.lookback_period }}</td>
                        <td>{{ job.switching_cost }}%</td>
                        <td><a href="/static/results/{{ job.id }}-portfolio.csv" download>[Download]</a></td>
                        <td><a href="/static/results/{{ job.id }}-trades.csv" download>[Download]</a></td>
                    </tr>
                {% endfor %}
                {% if jobs|length == 0 %}
                    <tr>
                        <td colspan="10" style="text-align: center">No jobs yet.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </section>
{% endblock %}